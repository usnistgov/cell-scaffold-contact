# 3D Measurement of Stem Cell-Scaffold Interactions Based on Cell-Scaffold Contact Shapes
 
This source code repository contains the algorithms used to segment cells and scaffolds from co-registered pairs of fluorescent confocal z-stacks. The algorithms are designed to perform:
* Cell segmentation (Java 1.8)
* Statistical model-based segmentation of spun coat and fiber scaffold types (Matlab 2015a)
* Planar geometrical model-based segmentation of spun coat scaffolds (Matlab 2015a)
* Cylindrical geometrical model-based segmentation of fiber scaffolds (Java and C++)

The application of these algorithms have been described at https://isg.nist.gov/deepzoomweb/data/stemcellmaterialinteractions and includes biological hypothesis, imaging description, and data description. The data and visualization of the cell-scaffold contact data are also available from https://isg.nist.gov/deepzoomweb/data/stemcellmaterialinteractions.
 
To run each algorithm, please, use the following functions with test files available at https://isg.nist.gov/deepzoomweb/fileBrowsing/3Dcontact/RawCropped/:
* Cell segmentation
    * Java class *segment-validate/src/pipeline3D/Image3DProcessingPipeline.java*
    * Input arguments: *inputImagesFolder imagesFileNameExtension outputDirectory outputCSVFileName thresholdMinimumValue thresholdMaximumValue thresholdStep voxelDimX voxelDimY voxelDimZ voxelDimUnit method*
        * Method can be: MinError, Otsu, EGTSobel2D, EGTSobel3D, Triangle or DarkFrames (MinError was used for these test files)
        * Example: */path/to/inputImagesFolder tif /path/to/outputDirectory outCSVFile.csv 1 65535 1 0.12 0.12 0.46 um MinError*
    * Large images may require to increase the JVM max memory size, using the option *-Xmx* (for example *-Xmx10G* for 10GB)
* Statistical model-based segmentation of spun coat and fiber scaffold types
    * Please refer to the file *segmentation-imagemodels/src/XML/ReadMe.txt*
* Planar geometrical model-based segmentation of spun coat scaffolds
    * *Under construction*
* Cylindrical geometrical model-based segmentation of fiber scaffolds 
    * Convert a set of acquired tif files to a FITS file 
        * Java class *segment-validate/src/io/ConvertTiffStackToFITS.java*
        * Input arguments: *inputImagesFolder outputDirectory*
    * Convert FITS to NII files
    * Run modified vesselness filter on NII files:
        * Code is available from this repository: https://gitlab.com/piotr.szczypinski/microfibers
        * Example: *horvess -i input.nii -o output.nii -m Frangi -z -s 3 -l 0.4 -h 4.0*
    * Run Java class segment-validate/src/pipeline3D/FiberScaffold2BinaryContact.java on the nii files generated by Horvess
        * Input parameters can be modified direclty in the batchProcess and batchProcessVR methods, the method to call can be selected in the Main method